{"version":3,"file":"js/244.c9062305.js","mappings":"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","sources":["webpack://p5test/./src/axios.ts","webpack://p5test/./src/stores/user.ts","webpack://p5test/./src/views/RegisterView.vue?b167","webpack://p5test/./src/views/RegisterView.vue","webpack://p5test/./node_modules/js-cookie/dist/js.cookie.mjs"],"sourcesContent":["import axios from 'axios';\nimport Cookies from 'js-cookie';\n\nlet $token:string = Cookies.get('accessToken') === undefined ? '' : Cookies.get('accessToken')!;\n\nfunction updateToken(){\n    $token = Cookies.get('accessToken')!\n    $api = axios.create({\n        baseURL: `http://${process.env.VUE_APP_APP_NAME}:${process.env.VUE_APP_HOST_PORT}`,\n        headers: {\n            'Content-type': 'application/json',\n            'Authorization': 'Bearer ' + $token\n        }\n    });\n}\n\nlet $api = axios.create({\n    baseURL: `http://${process.env.VUE_APP_APP_NAME}:${process.env.VUE_APP_HOST_PORT}`,\n    headers: {\n        'Content-type': 'application/json',\n        'Authorization': 'Bearer ' + $token\n    }\n});\n\nexport {$api, $token, updateToken};","import { defineStore } from \"pinia\";\nimport { ref } from \"vue\"\nimport {$api} from \"@/axios\"\nimport { useRouter } from \"vue-router\";\n\n// ref()s become state properties\n// computed()s become getters\n// function()s become actions\n\nexport const useUserStore = defineStore('user', () =>\n{\n    const router = useRouter()\n    const user: any = ref({\"id\":-1,\"username\":\"\",\"email\":\"\",\"displayName\":\"\",\"imgPath\":\"\"});\n    async function initUser() {\n        $api.get('/user/me').then((res) => {\n            user.value = res.data;\n        }).catch((err:any) =>{\n            \n            console.log(err);\n        })\n    }\n\n    return({user, initUser})\n})","import { defineComponent as _defineComponent } from 'vue'\nimport { resolveComponent as _resolveComponent, createVNode as _createVNode, createTextVNode as _createTextVNode, createElementVNode as _createElementVNode, unref as _unref, vModelText as _vModelText, withDirectives as _withDirectives, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\"\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-482918c2\"),n=n(),_popScopeId(),n)\nconst _hoisted_1 = { id: \"registercontainer\" }\nconst _hoisted_2 = { id: \"registerForm\" }\nconst _hoisted_3 = { id: \"imageCont\" }\nconst _hoisted_4 = [\"src\"]\nconst _hoisted_5 = { for: \"file\" }\nconst _hoisted_6 = {\n  key: 1,\n  id: \"faBtn\"\n}\n\nimport { ref,onMounted } from 'vue'\n    // import Cookies from 'js-cookie'\n    import { useRouter } from 'vue-router';\n    import {$api, $token, updateToken} from '@/axios'\n    import type { Ref } from 'vue'\n    import { useUserStore } from '@/stores/user';\n    import { useToast } from 'vue-toastification';\n\n    \nexport default /*#__PURE__*/_defineComponent({\n  __name: 'RegisterView',\n  setup(__props) {\n\n    /*eslint-disable*/\n    const store = useUserStore();\n    const newName = ref(\"\");\n    const toast = useToast();\n    let img:any;\n    let router = useRouter()\n    let imageInput:Ref<any> = ref(null);\n    onMounted(async () => {\n        try{\n            store.user = (await $api.get('/user/me')).data;\n        }\n        catch(e){\n            toast.error('Failed to fetch user data');\n            router.push('/login');\n        }\n    })\n\n    function changeImage(e:any)\n    {\n        store.user.imgPath = URL.createObjectURL(e.target.files[0]);\n    }\n\n    function redirectHome() {\n        router.push('/twofa')\n    }\n\n    function submitForm()\n    {\n        var bodyFormData = new FormData();\n        bodyFormData.append('file', imageInput.value.files[0]);\n        if(newName.value !== \"\"){\n            console.log(newName.value)\n            bodyFormData.append('displayName', newName.value);\n        }\n        $api({\n                method: \"patch\",\n                url: \"user/update\",\n                data: bodyFormData,\n                headers: {\n                     \"Content-Type\": \"multipart/form-data\",\n                    },\n                })\n                .then(function () {\n                    router.push('/')\n                })\n                .catch(function (response) {\n                    if(response.response.data.message instanceof Array){\n                        response.response.data.message.forEach((element:any) => {\n                            toast.error(element);\n                        });\n                    }\n                    else{\n                        toast.error(response.response.data.message); \n                    }\n                });\n    }\n\nreturn (_ctx: any,_cache: any) => {\n  const _component_fa = _resolveComponent(\"fa\")!\n\n  return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n    _createElementVNode(\"h3\", null, [\n      _createVNode(_component_fa, { icon: \"gear\" }),\n      _createTextVNode(\" Account settings \")\n    ]),\n    _createElementVNode(\"div\", _hoisted_2, [\n      _createElementVNode(\"div\", _hoisted_3, [\n        _createElementVNode(\"img\", {\n          src: _unref(store).user?.imgPath,\n          alt: \"bruh\"\n        }, null, 8, _hoisted_4),\n        _createElementVNode(\"label\", _hoisted_5, [\n          _createVNode(_component_fa, { icon: \"file-arrow-up\" })\n        ]),\n        _createElementVNode(\"input\", {\n          ref_key: \"imageInput\",\n          ref: imageInput,\n          type: \"file\",\n          name: \"file\",\n          id: \"file\",\n          accept: \".jpg,.jpeg,.png,.gif\",\n          onChange: changeImage\n        }, null, 544)\n      ]),\n      _withDirectives(_createElementVNode(\"input\", {\n        type: \"text\",\n        placeholder: \"change your name\",\n        id: \"usernameInput\",\n        name: \"username\",\n        \"onUpdate:modelValue\": _cache[0] || (_cache[0] = ($event: any) => ((newName).value = $event))\n      }, null, 512), [\n        [_vModelText, newName.value]\n      ]),\n      (_unref(store).user.is2faEnabled === false)\n        ? (_openBlock(), _createElementBlock(\"button\", {\n            key: 0,\n            id: \"faBtn\",\n            onClick: redirectHome\n          }, \"activate 2FA\"))\n        : (_openBlock(), _createElementBlock(\"button\", _hoisted_6, [\n            _createVNode(_component_fa, { icon: \"check\" }),\n            _createTextVNode(\"2FA activated\")\n          ])),\n      _createElementVNode(\"button\", {\n        onClick: submitForm,\n        id: \"saveBtn\"\n      }, \"save\")\n    ])\n  ]))\n}\n}\n\n})","import script from \"./RegisterView.vue?vue&type=script&lang=ts&setup=true\"\nexport * from \"./RegisterView.vue?vue&type=script&lang=ts&setup=true\"\n\nimport \"./RegisterView.vue?vue&type=style&index=0&id=482918c2&scoped=true&lang=css\"\n\nimport exportComponent from \"/Users/mel-haya/Desktop/front/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-482918c2\"]])\n\nexport default __exports__","/*! js-cookie v3.0.1 | MIT */\n/* eslint-disable no-var */\nfunction assign (target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i];\n    for (var key in source) {\n      target[key] = source[key];\n    }\n  }\n  return target\n}\n/* eslint-enable no-var */\n\n/* eslint-disable no-var */\nvar defaultConverter = {\n  read: function (value) {\n    if (value[0] === '\"') {\n      value = value.slice(1, -1);\n    }\n    return value.replace(/(%[\\dA-F]{2})+/gi, decodeURIComponent)\n  },\n  write: function (value) {\n    return encodeURIComponent(value).replace(\n      /%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,\n      decodeURIComponent\n    )\n  }\n};\n/* eslint-enable no-var */\n\n/* eslint-disable no-var */\n\nfunction init (converter, defaultAttributes) {\n  function set (key, value, attributes) {\n    if (typeof document === 'undefined') {\n      return\n    }\n\n    attributes = assign({}, defaultAttributes, attributes);\n\n    if (typeof attributes.expires === 'number') {\n      attributes.expires = new Date(Date.now() + attributes.expires * 864e5);\n    }\n    if (attributes.expires) {\n      attributes.expires = attributes.expires.toUTCString();\n    }\n\n    key = encodeURIComponent(key)\n      .replace(/%(2[346B]|5E|60|7C)/g, decodeURIComponent)\n      .replace(/[()]/g, escape);\n\n    var stringifiedAttributes = '';\n    for (var attributeName in attributes) {\n      if (!attributes[attributeName]) {\n        continue\n      }\n\n      stringifiedAttributes += '; ' + attributeName;\n\n      if (attributes[attributeName] === true) {\n        continue\n      }\n\n      // Considers RFC 6265 section 5.2:\n      // ...\n      // 3.  If the remaining unparsed-attributes contains a %x3B (\";\")\n      //     character:\n      // Consume the characters of the unparsed-attributes up to,\n      // not including, the first %x3B (\";\") character.\n      // ...\n      stringifiedAttributes += '=' + attributes[attributeName].split(';')[0];\n    }\n\n    return (document.cookie =\n      key + '=' + converter.write(value, key) + stringifiedAttributes)\n  }\n\n  function get (key) {\n    if (typeof document === 'undefined' || (arguments.length && !key)) {\n      return\n    }\n\n    // To prevent the for loop in the first place assign an empty array\n    // in case there are no cookies at all.\n    var cookies = document.cookie ? document.cookie.split('; ') : [];\n    var jar = {};\n    for (var i = 0; i < cookies.length; i++) {\n      var parts = cookies[i].split('=');\n      var value = parts.slice(1).join('=');\n\n      try {\n        var foundKey = decodeURIComponent(parts[0]);\n        jar[foundKey] = converter.read(value, foundKey);\n\n        if (key === foundKey) {\n          break\n        }\n      } catch (e) {}\n    }\n\n    return key ? jar[key] : jar\n  }\n\n  return Object.create(\n    {\n      set: set,\n      get: get,\n      remove: function (key, attributes) {\n        set(\n          key,\n          '',\n          assign({}, attributes, {\n            expires: -1\n          })\n        );\n      },\n      withAttributes: function (attributes) {\n        return init(this.converter, assign({}, this.attributes, attributes))\n      },\n      withConverter: function (converter) {\n        return init(assign({}, this.converter, converter), this.attributes)\n      }\n    },\n    {\n      attributes: { value: Object.freeze(defaultAttributes) },\n      converter: { value: Object.freeze(converter) }\n    }\n  )\n}\n\nvar api = init(defaultConverter, { path: '/' });\n/* eslint-enable no-var */\n\nexport default api;\n"],"names":["$token","undefined","Cookies","updateToken","$api","axios","baseURL","headers","useUserStore","defineStore","useRouter","user","ref","async","initUser","then","res","value","data","catch","err","console","log","_hoisted_1","id","_hoisted_2","_hoisted_3","_hoisted_4","_hoisted_5","for","_hoisted_6","key","_defineComponent","__name","setup","__props","store","newName","toast","useToast","router","imageInput","changeImage","e","imgPath","URL","createObjectURL","target","files","redirectHome","push","submitForm","bodyFormData","FormData","append","method","url","response","message","Array","forEach","element","error","onMounted","_ctx","_cache","_component_fa","_resolveComponent","_openBlock","_createElementBlock","_createElementVNode","_createVNode","icon","_createTextVNode","src","_unref","alt","ref_key","type","name","accept","onChange","_withDirectives","placeholder","$event","_vModelText","is2faEnabled","onClick","__exports__","assign","i","arguments","length","source","defaultConverter","read","slice","replace","decodeURIComponent","write","encodeURIComponent","init","converter","defaultAttributes","set","attributes","document","expires","Date","now","toUTCString","escape","stringifiedAttributes","attributeName","split","cookie","get","cookies","jar","parts","join","foundKey","Object","create","remove","withAttributes","this","withConverter","freeze","api","path"],"sourceRoot":""}
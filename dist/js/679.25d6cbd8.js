"use strict";(self["webpackChunkp5test"]=self["webpackChunkp5test"]||[]).push([[679],{5381:function(e,t,n){n.d(t,{G2:function(){return c},Wh:function(){return u},jM:function(){return i}});var r=n(6265),o=n.n(r),a=n(680);let c=void 0===a.Z.get("accessToken")?"":a.Z.get("accessToken");function i(){c=a.Z.get("accessToken"),u=o().create({baseURL:"http://127.0.0.1:3000",headers:{"Content-type":"application/json",Authorization:"Bearer "+c}})}let u=o().create({baseURL:"http://127.0.0.1:3000",headers:{"Content-type":"application/json",Authorization:"Bearer "+c}})},8679:function(e,t,n){n.r(t),n.d(t,{default:function(){return b}});n(7658);var r=n(3396),o=n(4870),a=n(3862),c=n(2483),i=n(5381),u=n(680),s=n(4677),d=n(5941);const p={id:"registercontainer"},l={id:"twofaForm"},f=["src"],v=["onKeyup"],h={key:0,id:"invalidErr"};var g=(0,r.aZ)({__name:"twofaView",setup(e){let t=(0,o.iH)(""),n=(0,o.iH)(!1),g=(0,o.iH)(""),m=(0,c.tv)();const k=(0,s.pm)();async function b(){try{const e=await i.Wh.post("/2fa/verify",{code:g.value});d.log(e.data.accessToken),u.Z.set("accessToken",e.data.accessToken),(0,i.jM)(),m.go(-1)}catch(e){n.value=!0}}return(0,r.bv)((async()=>{try{await i.Wh.get("/user/me")}catch(e){k.error("Failed to fetch user data"),m.push("/login")}i.Wh.get("/2fa/generate").then((function(e){t.value=e.data})).catch((e=>d.log(e)))})),(e,c)=>{const i=(0,r.up)("fa");return(0,r.wg)(),(0,r.iD)("div",p,[(0,r._)("p",null,[(0,r.Wm)(i,{icon:"lock"}),(0,r.Uk)(" Two-factor authentication")]),(0,r._)("div",l,[(0,r._)("img",{src:(0,o.SU)(t),alt:"bruh"},null,8,f),(0,r.wy)((0,r._)("input",{type:"text",onKeyup:(0,a.D2)(b,["enter"]),placeholder:"enter code",id:"usernameInput",name:"code","onUpdate:modelValue":c[0]||(c[0]=e=>(0,o.dq)(g)?g.value=e:g=e)},null,40,v),[[a.nr,(0,o.SU)(g)]]),(0,o.SU)(n)?((0,r.wg)(),(0,r.iD)("p",h,"Invalid code")):(0,r.kq)("",!0),(0,r._)("div",null,[(0,r._)("button",{onClick:b},"Save"),(0,r._)("button",{onClick:c[1]||(c[1]=e=>(0,o.SU)(m).go(-1))},"cancel")])])])}}}),m=n(89);const k=(0,m.Z)(g,[["__scopeId","data-v-530d6a93"]]);var b=k},680:function(e,t){
/*! js-cookie v3.0.1 | MIT */
function n(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)e[r]=n[r]}return e}var r={read:function(e){return'"'===e[0]&&(e=e.slice(1,-1)),e.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(e){return encodeURIComponent(e).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}};function o(e,t){function r(r,o,a){if("undefined"!==typeof document){a=n({},t,a),"number"===typeof a.expires&&(a.expires=new Date(Date.now()+864e5*a.expires)),a.expires&&(a.expires=a.expires.toUTCString()),r=encodeURIComponent(r).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var c="";for(var i in a)a[i]&&(c+="; "+i,!0!==a[i]&&(c+="="+a[i].split(";")[0]));return document.cookie=r+"="+e.write(o,r)+c}}function a(t){if("undefined"!==typeof document&&(!arguments.length||t)){for(var n=document.cookie?document.cookie.split("; "):[],r={},o=0;o<n.length;o++){var a=n[o].split("="),c=a.slice(1).join("=");try{var i=decodeURIComponent(a[0]);if(r[i]=e.read(c,i),t===i)break}catch(u){}}return t?r[t]:r}}return Object.create({set:r,get:a,remove:function(e,t){r(e,"",n({},t,{expires:-1}))},withAttributes:function(e){return o(this.converter,n({},this.attributes,e))},withConverter:function(e){return o(n({},this.converter,e),this.attributes)}},{attributes:{value:Object.freeze(t)},converter:{value:Object.freeze(e)}})}var a=o(r,{path:"/"});t["Z"]=a}}]);
//# sourceMappingURL=679.25d6cbd8.js.map
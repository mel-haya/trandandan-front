"use strict";(self["webpackChunkp5test"]=self["webpackChunkp5test"]||[]).push([[615],{6615:function(e,o,a){a.r(o),a.d(o,{default:function(){return O}});a(7658);var t=a(3396),i=a(4870),n=a(7139),r=a(8940),l=a(3560),d=a(5381),s=a(2066),c=a(5941);const m=(0,s.io)("http://127.0.0.1:3000/play",{extraHeaders:{token:d.G2}}),f=e=>{let o,t,i,n,r,l,d,s,f,g,p;o=window.innerWidth>1400?window.innerWidth-(window.innerWidth-1400)-100:window.innerWidth-100;let u=o,w=48*o/100,h=o/1300,b=w/624;c.log(h+" "+b);let y=0,_=0,v=0,x=0;const k={x:o/2,y:w/2,r:15,dx:0,dy:0,p1:0,p2:0,score1:0,score2:0,playerleft:"",playerright:"",middleY:0,counter:0,mDY:0},C={mousepos:0,room:"",pos:0},S={ball_data:k};let E,R=!0,I=!1,M=!1,N=!1,W=!1,j=!1,O=!1,P=!1,T=!1,Y=!1,q=!1,z=!1,G=!1;const H=5,D=5,L=3;let U=o-7,Z=o/14,$=o/14,A=0,F=0;function V(){let a=0;for(a=0;a<w;a+=45)e.fill("rgba(172,70,130,1)"),e.stroke(0),e.strokeWeight(0),e.rect(o/2,a,2,30),e.rect(0,0,5,w),e.rect(o-5,0,5,o)}function X(){e.fill("rgba(232,190,251,1)"),o>700?e.textSize(20):e.textSize(15);let a=Math.abs(k.dx)-7;a=a<0?0:a,e.text("Difficulty: "+a,o/4-o/20,30),e.text(F+" : "+A,3*o/4-o/30,30),e.fill("rgba(172,70,130,1)")}function B(){t=e.loadImage("https://media.istockphoto.com/vectors/pixel-art-8bit-you-win-text-with-three-winner-golden-cups-on-black-vector-id1268272329?k=20&m=1268272329&s=170667a&w=0&h=79fO42ChPzO8gcIdzngCuag6_Y9ef2dUh1LWpaOkyXo="),n=e.loadImage(a(5434)),r=e.loadImage(a(9809)),l=e.loadImage(a(7410)),d=e.loadImage(a(9774)),s=e.loadImage(a(2661)),g=e.loadImage(a(8210)),p=e.loadImage(a(9869)),f=e.loadImage(a(9958)),i=e.loadImage("https://elements-video-cover-images-0.imgix.net/files/961bcd50-cb8b-4632-b46c-3abb528c984d/inline_image_preview.jpg?auto=compress&crop=edges&fit=crop&fm=jpeg&h=800&w=1200&s=90f07628b0c40410c1e819e2da97c2b8")}m.on("fin",(o=>{e.remove(),m.off("connection"),m.off("takePosition"),m.off("mouse"),m.off("ball"),m.off("reset"),m.off("restart"),m.off("fin"),m.off("done"),m.off("won"),m.off("lost"),m.off("watch_wait"),m.off("watch_work"),m.off("watch_modern"),m.off("inGame"),m.off("start_connection"),m.off("setScore"),m.disconnect()})),m.on("connection",(e=>{R=!1,"wait"===e?N=!0:"start"===e?(N=!1,W=!1,M=!0):"wait Modern"===e?(N=!0,P=!0):"start Modern"===e&&(N=!1,W=!1,P=!0,M=!0)})),m.on("takePosition",(e=>{C.pos=e.yourplace,C.room=e.room,c.log(e.yourplace+" "+e.room)})),m.on("mouse",(e=>{1===e.pos?(y=e.mousepos*b,v=e.mousepos):(_=e.mousepos*b,x=e.mousepos)})),m.on("ball",(e=>{S.ball_data.x=e.x*h,S.ball_data.y=e.y*b,S.ball_data.dx=e.dx,S.ball_data.dy=e.dy,1==P&&(S.ball_data.middleY=e.middleY*b)})),m.on("reset",(a=>{A=a.score1,F=a.score2,e.text("score "+A+" : "+F,o/2+10,30),e.noLoop()})),m.on("setScore",(a=>{A=a.score1,F=a.score2,e.text("score "+A+" : "+F,o/2+10,30)})),m.on("restart",(o=>{m.id===o.room&&(S.ball_data.x=o.x*h,S.ball_data.y=o.y*b,S.ball_data.dx=o.dx,S.ball_data.dy=o.dy),!0===M&&e.loop()})),m.on("won",(o=>{R=!1,!1===O&&(j=!0,M=!1,e.loop())})),m.on("lost",(o=>{R=!1,O=!0,M=!1,e.loop()})),m.on("done",(o=>{R=!1,N=!1,W=!1,z=!0,e.loop()})),m.on("watch_wait",(o=>{R=!1,N=!1,W=!0,e.loop()})),m.on("watch_work",(o=>{R=!1,N=!1,W=!1,M=!0,e.loop()})),m.on("watch_modern",(o=>{R=!1,P=!0,e.loop()})),m.on("inGame",(e=>{R=!1,T=!0,N=!1,2===e?Y=!0:3===e?(W=!1,q=!0,T=!1):4===e&&(W=!1,q=!1,T=!1,G=!0),m.off("connection"),m.off("takePosition"),m.off("mouse"),m.off("ball"),m.off("reset"),m.off("restart"),m.off("done"),m.off("won"),m.off("lost"),m.off("watch_wait"),m.off("watch_work"),m.off("watch_modern"),m.off("inGame"),m.off("setScore")})),m.on("start_connection",(e=>{R=!1,!1===T&&(I=!0,m.emit("connection",""))})),e.setup=function(){e.createCanvas(o,w),B(),k.r=o<=325?4:o<=650?7:o<=975?11:15};let J=o/28,K=e.mouseY-J;e.draw=function(){e.clear(),e.strokeWeight(w/100),C.mousepos=e.mouseY/b,1==I&&m.emit("update_mouse",C),o=window.innerWidth>1400?window.innerWidth-(window.innerWidth-1400)-100:window.innerWidth-100,w=48*o/100,V(),X(),e.rect(0,0,2,w),e.rect(0,w-2,o,2),e.rect(0,0,o,2),e.rect(o-2,0,2,w),K=y,J=(Z-10)/2,K>w-J?K=w-J:K<J&&(K=J),e.fill(250,250,250),e.stroke("rgba(132,51,125,0.5)"),e.strokeWeight(4),E=K-J,e.rect(L,E,H,Z-10),K=_,J=(Z-10)/2,K>w-J?K=w-J:K<J&&(K=J),e.fill(250,250,250),e.stroke("rgba(132,51,125,0.5)");const a=K-J;e.rect(U,a,D,$-10),1==P&&(e.fill(236,132,236),e.rect(o/2-3,S.ball_data.middleY,6,o/9)),1==P?e.fill(250,250-15*(Math.abs(k.dx)-7),250-12*(Math.abs(k.dx)-7)):e.fill(250,250,250),1==M&&e.ellipse(S.ball_data.x,S.ball_data.y,S.ball_data.r,S.ball_data.r),e.fill(250,250,250),u!=o&&(e.resizeCanvas(o,w),u=o,Z=o/14,$=o/14,U=o-7,h=o/1300,b=w/624,k.r=o<=325?4:o<=650?7:o<=975?11:15),e.strokeWeight(w/100),e.noCursor(),1==z&&(e.imageMode(e.CENTER),e.image(f,o/2,w/2,3*o/8,o/4),e.cursor(e.CROSS)),1==Y?(e.imageMode(e.CENTER),e.image(d,o/2,w/2,3*o/8,o/4),e.cursor(e.CROSS)):1==G?(e.imageMode(e.CENTER),e.image(g,o/2,w/2,3*o/8,o/4),e.cursor(e.CROSS)):1==q&&0==j&&0==O?(e.imageMode(e.CENTER),e.image(s,o/2,w/2,3*o/8,o/4),e.cursor(e.CROSS)):1==T&&(e.imageMode(e.CENTER),e.image(l,o/2,w/2,3*o/8,o/4),e.cursor(e.CROSS)),1==W&&0==T&&(e.imageMode(e.CENTER),e.image(r,o/2,w/2,3*o/8,o/4),e.cursor(e.CROSS)),1==N&&0==T&&(e.imageMode(e.CENTER),e.image(n,o/2,w/2,3*o/8,o/4),e.cursor(e.CROSS)),1==j&&0==O&&0==T&&(z=!1,e.imageMode(e.CENTER),e.image(t,o/2,w/2,o/4,o/4),e.cursor(e.CROSS)),1==O&&0==T&&(z=!1,e.imageMode(e.CENTER),e.image(i,o/2,w/2,o/4,o/4),e.cursor(e.CROSS)),1==R&&(e.imageMode(e.CENTER),e.image(p,o/2,w/2,3*o/8,o/4),e.cursor(e.CROSS))}};function g(){m.emit("discn","")}function p(){0==m.connected&&m.connect()}function u(e,o){m.emit("getIDS",{token:d.G2,id:e,socket:"",room:"",mode:o,pos:0})}var w=a(8851),h=a.n(w),b=a(2483),y=a(4677),_=a(5941);const v={id:"gameContainer"},x={id:"gameHeader"},k={id:"players"},C={class:"player"},S=["v-if"],E={id:"playerName"},R={class:"player"},I=["v-if"],M={id:"playerName"};var N=(0,t.aZ)({__name:"GameView",setup(e){const o=(0,i.iH)(),a=(0,b.yj)(),s=(0,l.L)(),c=(0,y.pm)();_.log(a.query.mode);const w=(0,b.tv)(),N=(0,i.iH)({name:"loading",imgPath:""}),W=(0,i.iH)({name:"loading",imgPath:""});return(0,t.bv)((async()=>{try{s.user=(await d.Wh.get("/user/me")).data}catch(e){c.error("Failed to fetch user data"),w.push("/login")}new(h())(f,o.value),await(0,t.Y3)(),setTimeout((()=>{p(),"classic"===a.query.mode||"modern"===a.query.mode?u(0,a.query.mode):("watch"===a.query.mode||"private"===a.query.mode)&&u(a.query.id,a.query.mode),m.on("setPlayers",(e=>{N.value={name:e.player1Name,imgPath:e.player1Img},W.value={name:e.player2Name,imgPath:e.player2Img}}))}),40)})),(0,t.Ah)((async()=>{g()})),(e,a)=>((0,t.wg)(),(0,t.iD)("div",v,[(0,t._)("div",x,[(0,t._)("img",{src:r,alt:"",onClick:a[0]||(a[0]=e=>(0,i.SU)(w).push("/"))})]),(0,t._)("div",k,[(0,t._)("div",C,[(0,t._)("div",{id:"playerImg","v-if":N.value.imgPath,style:(0,n.j5)(`background-image: url('${N.value.imgPath}')`)},null,12,S),(0,t._)("div",E,(0,n.zw)(N.value.name),1)]),(0,t._)("div",R,[(0,t._)("div",{id:"playerImg","v-if":W.value.imgPath,style:(0,n.j5)(`background-image: url('${W.value.imgPath}')`)},null,12,I),(0,t._)("div",M,(0,n.zw)(W.value.name),1)])]),(0,t._)("div",{ref_key:"game",ref:o,id:"game"},null,512)]))}}),W=a(89);const j=(0,W.Z)(N,[["__scopeId","data-v-f8dfecd8"]]);var O=j},8210:function(e,o,a){e.exports=a.p+"img/badlink.df0b3e7b.jpg"},9958:function(e,o,a){e.exports=a.p+"img/congratulations.951ad99d.jpeg"},9869:function(e,o,a){e.exports=a.p+"img/conprob.49e301f0.jpeg"},9809:function(e,o,a){e.exports=a.p+"img/game_wait.c8eef699.jpg"},7410:function(e,o,a){e.exports=a.p+"img/inaGame.a7431c44.jpeg"},2661:function(e,o,a){e.exports=a.p+"img/noMatch.dbe87e7f.jpeg"},8940:function(e,o,a){e.exports=a.p+"img/pong-online.9bf6ce6e.png"},5434:function(e,o,a){e.exports=a.p+"img/waiting.a2a4b294.jpg"},9774:function(e,o,a){e.exports=a.p+"img/wryou.ef6eef5d.jpeg"}}]);
//# sourceMappingURL=615.76d93ea1.js.map
"use strict";(self["webpackChunkp5test"]=self["webpackChunkp5test"]||[]).push([[244],{5381:function(e,t,n){n.d(t,{G2:function(){return o},Wh:function(){return u},jM:function(){return c}});var r=n(6265),a=n.n(r),i=n(680);let o=void 0===i.Z.get("accessToken")?"":i.Z.get("accessToken");function c(){o=i.Z.get("accessToken"),u=a().create({baseURL:"http://127.0.0.1:3000",headers:{"Content-type":"application/json",Authorization:"Bearer "+o}})}let u=a().create({baseURL:"http://127.0.0.1:3000",headers:{"Content-type":"application/json",Authorization:"Bearer "+o}})},3560:function(e,t,n){n.d(t,{L:function(){return u}});var r=n(1020),a=n(4870),i=n(5381),o=n(2483),c=n(5941);const u=(0,r.Q_)("user",(()=>{(0,o.tv)();const e=(0,a.iH)({id:-1,username:"",email:"",displayName:"",imgPath:""});async function t(){i.Wh.get("/user/me").then((t=>{e.value=t.data})).catch((e=>{c.log(e)}))}return{user:e,initUser:t}}))},1244:function(e,t,n){n.r(t),n.d(t,{default:function(){return C}});n(7658);var r=n(3396),a=n(4870),i=n(3862),o=n(2483),c=n(5381),u=n(3560),s=n(4677),p=n(5941);const l={id:"registercontainer"},d={id:"registerForm"},f={id:"imageCont"},h=["src"],m={for:"file"},v={key:1,id:"faBtn"};var g=(0,r.aZ)({__name:"RegisterView",setup(e){const t=(0,u.L)(),n=(0,a.iH)(""),g=(0,s.pm)();let b=(0,o.tv)(),y=(0,a.iH)(null);function C(e){t.user.imgPath=URL.createObjectURL(e.target.files[0])}function k(){b.push("/twofa")}function w(){var e=new FormData;e.append("file",y.value.files[0]),""!==n.value&&(p.log(n.value),e.append("displayName",n.value)),(0,c.Wh)({method:"patch",url:"user/update",data:e,headers:{"Content-Type":"multipart/form-data"}}).then((function(){b.push("/")})).catch((function(e){e.response.data.message instanceof Array?e.response.data.message.forEach((e=>{g.error(e)})):g.error(e.response.data.message)}))}return(0,r.bv)((async()=>{try{t.user=(await c.Wh.get("/user/me")).data}catch(e){g.error("Failed to fetch user data"),b.push("/login")}})),(e,o)=>{const c=(0,r.up)("fa");return(0,r.wg)(),(0,r.iD)("div",l,[(0,r._)("h3",null,[(0,r.Wm)(c,{icon:"gear"}),(0,r.Uk)(" Account settings ")]),(0,r._)("div",d,[(0,r._)("div",f,[(0,r._)("img",{src:(0,a.SU)(t).user?.imgPath,alt:"bruh"},null,8,h),(0,r._)("label",m,[(0,r.Wm)(c,{icon:"file-arrow-up"})]),(0,r._)("input",{ref_key:"imageInput",ref:y,type:"file",name:"file",id:"file",accept:".jpg,.jpeg,.png,.gif",onChange:C},null,544)]),(0,r.wy)((0,r._)("input",{type:"text",placeholder:"change your name",id:"usernameInput",name:"username","onUpdate:modelValue":o[0]||(o[0]=e=>n.value=e)},null,512),[[i.nr,n.value]]),!1===(0,a.SU)(t).user.is2faEnabled?((0,r.wg)(),(0,r.iD)("button",{key:0,id:"faBtn",onClick:k},"activate 2FA")):((0,r.wg)(),(0,r.iD)("button",v,[(0,r.Wm)(c,{icon:"check"}),(0,r.Uk)("2FA activated")])),(0,r._)("button",{onClick:w,id:"saveBtn"},"save")])])}}}),b=n(89);const y=(0,b.Z)(g,[["__scopeId","data-v-482918c2"]]);var C=y},680:function(e,t){
/*! js-cookie v3.0.1 | MIT */
function n(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)e[r]=n[r]}return e}var r={read:function(e){return'"'===e[0]&&(e=e.slice(1,-1)),e.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(e){return encodeURIComponent(e).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}};function a(e,t){function r(r,a,i){if("undefined"!==typeof document){i=n({},t,i),"number"===typeof i.expires&&(i.expires=new Date(Date.now()+864e5*i.expires)),i.expires&&(i.expires=i.expires.toUTCString()),r=encodeURIComponent(r).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var o="";for(var c in i)i[c]&&(o+="; "+c,!0!==i[c]&&(o+="="+i[c].split(";")[0]));return document.cookie=r+"="+e.write(a,r)+o}}function i(t){if("undefined"!==typeof document&&(!arguments.length||t)){for(var n=document.cookie?document.cookie.split("; "):[],r={},a=0;a<n.length;a++){var i=n[a].split("="),o=i.slice(1).join("=");try{var c=decodeURIComponent(i[0]);if(r[c]=e.read(o,c),t===c)break}catch(u){}}return t?r[t]:r}}return Object.create({set:r,get:i,remove:function(e,t){r(e,"",n({},t,{expires:-1}))},withAttributes:function(e){return a(this.converter,n({},this.attributes,e))},withConverter:function(e){return a(n({},this.converter,e),this.attributes)}},{attributes:{value:Object.freeze(t)},converter:{value:Object.freeze(e)}})}var i=a(r,{path:"/"});t["Z"]=i}}]);
//# sourceMappingURL=244.c9062305.js.map